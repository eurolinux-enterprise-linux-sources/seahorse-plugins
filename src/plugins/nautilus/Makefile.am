gladedir = $(datadir)/seahorse/glade/
localedir = $(datadir)/locale

INCLUDES = -I$(top_builddir) \
	-I$(top_srcdir) \
	-I$(top_srcdir)/libseahorse \
	$(SEAHORSE_CFLAGS) \
	-DLOCALEDIR=\"$(localedir)\" \
	-DDATA_DIR=\""$(datadir)"\" \
	-DSEAHORSE_GLADEDIR=\""$(gladedir)"\" \
	-DLIBCRYPTUI_API_SUBJECT_TO_CHANGE

bin_PROGRAMS = seahorse-preferences seahorse-tool

seahorse_preferences_SOURCES = seahorse-pgp-preferences.c 

seahorse_preferences_LDADD = \
    $(top_builddir)/libseahorse/libseahorse.a \
    $(SEAHORSE_LIBS)
    
seahorse_tool_SOURCES = \
    seahorse-tool.c \
    seahorse-tool.h \
    seahorse-tool-files.c \
    seahorse-tool-progress.c

seahorse_tool_LDADD = \
    $(top_builddir)/libseahorse/libseahorse.a \
    $(SEAHORSE_LIBS) $(LIBCRYPTUI_LIBS)

# The new mime system
mimedir = $(datadir)/mime/packages
mime_DATA = seahorse.xml

if UPDATE_MIME_DATABASE
install-data-local:
	mkdir -p $(mimedir)
	update-mime-database $(datadir)/mime/

uninstall-local:
	update-mime-database $(datadir)/mime/
else
install-data-local:

uninstall-local:
endif

@INTLTOOL_DESKTOP_RULE@
desktopdir = $(datadir)/applications
desktop_in_files = seahorse-pgp-preferences.desktop.in \
	seahorse-pgp-encrypted.desktop.in \
	seahorse-pgp-signature.desktop.in \
	seahorse-pgp-keys.desktop.in 
desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)

man_MANS = seahorse-tool.1

EXTRA_DIST = \
    $(man_MANS) \
    $(mime_DATA) \
    $(mimeinfo_DATA) \
    $(desktop_in_files) \
    seahorse-pgp-encrypted.desktop.in.in \
    seahorse-pgp-keys.desktop.in.in \
    seahorse-pgp-signature.desktop.in.in 

CLEANFILES = *.bak \
	$(desktop_DATA) \
	seahorse-pgp-encrypted.desktop.in \
	seahorse-pgp-keys.desktop.in \
	seahorse-pgp-signature.desktop.in

